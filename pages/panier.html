<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Votre panier - myhygia">
    <title>Panier - myhygia</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="../css/variables.css">
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/components.css">
    <link rel="stylesheet" href="../css/pages.css">
    <link rel="stylesheet" href="../css/responsive.css">
    
    <!-- Favicon -->
    <link rel="icon" type="image/jpeg" href="../assets/images/logo/logo.jpg">
</head>
<body>
    <!-- Header -->
    <header class="header" id="header">
        <div class="header__container">
            <a href="../index.html" class="header__logo">
                <img src="../assets/images/logo/logo.jpg" alt="myhygia Logo" decoding="async">
                <span class="header__logo-text">myhygia</span>
            </a>
            
            <button class="mobile-menu-toggle" aria-label="Menu">
                <span></span>
                <span></span>
                <span></span>
            </button>
            
            <nav class="nav">
                <ul class="nav__list">
                    <li><a href="../index.html" class="nav__link">Accueil</a></li>
                    <li><a href="boutique.html" class="nav__link">Boutique</a></li>
                    <li><a href="../index.html#about" class="nav__link">À propos</a></li>
                    <li><a href="../index.html#contact" class="nav__link">Contact</a></li>
                </ul>
                <a href="panier.html" class="cart-btn">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="9" cy="21" r="1"/>
                        <circle cx="20" cy="21" r="1"/>
                        <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                    </svg>
                    <span>Panier</span>
                    <span class="cart-badge" style="display: none;">0</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="cart-page">
        <div class="cart__container">
            <div class="cart__header">
                <h1 class="cart__title">Votre Panier</h1>
            </div>

            <div class="cart__content" id="cart-content">
                <!-- Cart will be loaded by JavaScript -->
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__grid">
            <div class="footer__section footer__about">
                <h3>myhygia</h3>
                <p>
                    Votre spécialiste en calots et bonnets médicaux de qualité. 
                    Nous accompagnons les professionnels de santé au quotidien.
                </p>
            </div>
            
            <div class="footer__section">
                <h3>Liens Rapides</h3>
                <div class="footer__links">
                    <a href="../index.html" class="footer__link">Accueil</a>
                    <a href="boutique.html" class="footer__link">Boutique</a>
                    <a href="../index.html#about" class="footer__link">À propos</a>
                    <a href="panier.html" class="footer__link">Panier</a>
                </div>
            </div>
            
            <div class="footer__section">
                <h3>Contact</h3>
                <div class="footer__contact-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path>
                    </svg>
                    <span>+216 96 025 340</span>
                </div>
                <div class="footer__contact-item">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                        <polyline points="22,6 12,13 2,6"></polyline>
                    </svg>
                    <span>contact@myhygia.ma</span>
                </div>
            </div>
        </div>
        
        <div class="footer__bottom">
            <p>&copy; 2026 myhygia. Tous droits réservés.</p>
        </div>
    </footer>

    <!-- Back to Top Button -->
    <a href="#" class="back-to-top" aria-label="Retour en haut">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M18 15l-6-6-6 6"/>
        </svg>
    </a>

    <!-- Scripts -->
    <script src="../js/products.js"></script>
    <script src="../js/cart.js"></script>
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            renderCart();
            
            // Listen for cart updates
            window.addEventListener('cartUpdated', renderCart);
        });
        
        function renderCart() {
            const cartContent = document.getElementById('cart-content');
            const cart = Cart.getCart();
            
            if (cart.length === 0) {
                cartContent.innerHTML = `
                    <div class="cart__empty">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <circle cx="9" cy="21" r="1"/>
                            <circle cx="20" cy="21" r="1"/>
                            <path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"/>
                        </svg>
                        <h2>Votre panier est vide</h2>
                        <p>Découvrez notre collection de calots médicaux et ajoutez vos favoris !</p>
                        <a href="boutique.html" class="btn btn-primary">
                            Découvrir la boutique
                        </a>
                    </div>
                `;
                return;
            }
            
            const subtotal = Cart.getSubtotal();
            const shipping = Cart.getShipping();
            const total = Cart.getTotal();
            const freeShippingRemaining = STORE_INFO.freeShippingThreshold - subtotal;
            
            cartContent.innerHTML = `
                <div class="cart__items">
                    ${cart.map(item => `
                        <div class="cart-item" data-id="${item.id}">
                            <img src="../${item.image}" alt="${item.name}" class="cart-item__image" loading="lazy" decoding="async">
                            <div class="cart-item__info">
                                <h3>${item.name}</h3>
                                <span class="cart-item__price">${item.price} DT</span>
                            </div>
                            <div class="cart-item__quantity">
                                <button onclick="updateQuantity(${item.id}, ${item.quantity - 1})">−</button>
                                <span>${item.quantity}</span>
                                <button onclick="updateQuantity(${item.id}, ${item.quantity + 1})">+</button>
                            </div>
                            <button class="cart-item__remove" onclick="removeItem(${item.id})" aria-label="Supprimer">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="3 6 5 6 21 6"></polyline>
                                    <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                                </svg>
                            </button>
                        </div>
                    `).join('')}
                </div>
                
                <div class="cart__summary">
                    <h2>Récapitulatif</h2>
                    <div class="cart__summary-row">
                        <span>Sous-total</span>
                        <span>${subtotal} DT</span>
                    </div>
                    <div class="cart__summary-row">
                        <span>Livraison</span>
                        <span>${shipping === 0 ? 'Gratuite' : shipping + ' DT'}</span>
                    </div>
                    <div class="cart__summary-row total">
                        <span>Total</span>
                        <span>${total} DT</span>
                    </div>
                    
                    ${freeShippingRemaining > 0 ? `
                        <div class="cart__free-shipping" style="background: var(--warning-light); color: var(--warning);">
                            Plus que ${freeShippingRemaining} DT pour la livraison gratuite !
                        </div>
                    ` : `
                        <div class="cart__free-shipping">
                            ✓ Vous bénéficiez de la livraison gratuite !
                        </div>
                    `}
                    
                    <a href="commande.html" class="btn btn-primary btn-block cart__checkout-btn">
                        Passer la commande
                    </a>
                    <a href="boutique.html" class="btn btn-outline btn-block" style="margin-top: var(--spacing-sm);">
                        Continuer mes achats
                    </a>
                </div>
            `;
        }
        
        function updateQuantity(id, quantity) {
            Cart.updateQuantity(id, quantity);
            renderCart();
        }
        
        function removeItem(id) {
            Cart.removeItem(id);
            renderCart();
        }
    </script>
</body>
</html>
